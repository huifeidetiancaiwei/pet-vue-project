---
title: "宠爱有家-接口设计"
output:
  pdf_document:
    toc: true
    toc_depth: 2
    path: ./宠爱有家-接口设计.pdf
    number_sections: true
    highlight: tango
---

**M站萌漫-接口文档**

| 作者      | 日期       | 版本         | 修改内容 |
|---------|----------|------------|------|
| 宠爱有家项目组 | 2020-8-3 | Version1.0 | 初稿   |

## **目 录**

**TODO：文档完成后插入目录**

## **1.** **概述**

### *1.1 接口说明*

所有接口请求通过HTTP 请求，返回统一为JSON格式；

字符集：接口使用utf-8字符集。

大小写：接口参数名大小写敏感。

接口地址：未定（示例：127.0.0.1）。

端口：未定（示例：8080）。

### *1.2 登录说明*

客户端：使用token登录，用户登录后端返回一个32位的token字符串作为识别用户登录状态的唯一标识，前端调用部分（具体接口中会有说明）接口时需在参数上带token，
**token需在header中传递**。

token有效时间：暂定30分钟，即在用户没有任何操作的情况下30分钟后失去登录状态。

### *1.3 全局接口必传参数*

app端请求接口必传参数：时间戳、访问来源=0、token。

pc管理端请求接口必传：时间戳、访问来源=1。

time-stamp、source-type在header中传递。

| **参数名称** | **参数命名**    | **说明**           | **举例**     |
|----------|-------------|------------------|------------|
| 访问来源类别   | source-type | 用来识别请求来自app还是其他端 | 0:app,1:Pc |
| 时间戳      | time-stamp  |                  |            |

### *1.4接口返回数据说明*

接口返回数据类型：JSON

接口功能操作状态返回

**正确的JSON返回结果：**

```json
{
  "code": "200",
  "msg": "操作成功",
  "data": {
    "id": 1,
    "name": "示例"
  }
}
```

**错误状态返回码：**

```json
{
  "code": "0",
  "msg": "失败原因说明"
}
```

## **2** **状态码列表**

(说明：状态码列表暂定以下内容，根据项目开发的实际情况可能会有增加)

| code  | msg            |
|-------|----------------|
| 200   | 操作成功           |
| 0     | 操作失败           |
| 500   | 系统异常           |
| 401   | 用户权限校验失败       |
| 10xxx | 用户相关（eg：10001） |
| 20xxx | 商品相关           |
| 30xxx | 购物车相关          |
| 40xxx | 订单相关           |
| 50xxx | 支付相关           |

## 3 接口列表

### 3.1	用户

#### 3.11 发送短信验证码接口

调用接口：/api/ums/sms/sendSms

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：获取短信验证码，5分钟内有效，60秒内不会重复为同一个手机号发送相同类型的短信验证码。

INPUT

| **参数名称** | **参数类型** | **说明**            | 是否必传 |
|----------|----------|-------------------|------|
| phone    | 字符串      | 手机号               | 是    |
| codeType | 整型       | 验证码类型：1->登录+注册验证码 | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.12 手机号登录+注册接口

调用接口：/api/ums/user/login

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：用户第一次使用手机号登录成功后，系统会为该用户自动注册。

INPUT

| **参数名称** | **参数类型** | **说明** | **是否必传** |
|----------|----------|--------|----------|
| phone    | 字符串      | 手机号    | 是        |
| sms      | 字符串      | 登录验证码  | 是        |

OUTPUT

> data属性的数据格式为

| 字段    | 字段类型 | 字段说明  |
|-------|------|-------|
| token | 字符串  | token |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "token": "70fe12228b39432eb92ecddfc64006de"
  }
}
```

#### 3.13 通过token获取用户信息接口

调用接口：/api/ums/user/getUserByToken

请求方式：get

接口说明：使用token为参数，获取用户信息。

INPUT

| **参数名称** | **参数类型** | **说明** | **是否必传** |
|----------|----------|--------|----------|
| token    | 字符串      | 登陆后获取  | 是        |

OUTPUT

> data属性的数据格式为

| 字段       | 字段类型 | 字段说明     |
|----------|------|----------|
| userId   | 整型   | id       |
| account  | 字符串  | 账号       |
| openId   | 字符串  | 微信openId |
| userName | 字符串  | 用户昵称     |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "id": 90,
    "account": "15563862652",
    "openId": null,
    "userName": "15563862652"
  }
}
```

#### 3.14. 置换token接口

调用接口：/api/ums/user/replaceToken

请求方式：get

接口说明：token有效期为30分钟，有效期将要结束时调用该接口置换成新token。

INPUT：

| **参数名称** | **参数类型** | **说明**           | **是否必传** |
|----------|----------|------------------|----------|
| token    | token    | 登陆后获取（header中传递） | 是        |

OUTPUT

> data属性的数据格式为

| 字段    | 字段类型 | 字段说明 |
|-------|------|------|
| token | 字符串  | 登录标识 |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "token": "70fe12228b39432eb92ecddfc64006de"
  }
}
```

#### 3.15  注销接口

调用接口：/api/ums/user/logout

请求方式：get

接口说明：退出登录。

INPUT

| **参数名称** | **参数类型** | **说明**           | **举例** |
|----------|----------|------------------|--------|
| token    | token    | 登陆后获取（header中传递） | 是      |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.16 微信登录+注册接口

调用接口：/api/ums/user/weChat/login

请求方式：get

接口说明：唤起微信登录页面

INPUT

> 无

OUTPUT

> 无

#### 3.17 微信回调接口（非前端调用接口）

调用接口：

请求方式：post

接口说明：

​ 1、用户使用微信客户端扫码授权后，微信平台回调我们的接口，绑定完善、微信用户信息。

​ 2、用户第一次使用微信登录成功后，系统会为该用户自动注册。

​ 3、注册成功后会跳转到项目首页，项目首页地址需由前端提供。**注意：注册成功后地址会携带token。**

INPUT

| **参数名称** | **参数类型** | **说明** | **举例** |
|----------|----------|--------|--------|
| code     | 字符串      |        |        |

OUTPUT

> 无

**示例：**

> 微信回调成功后，会跳转到项目首页，并且携带用户token，token在项目首页url中拼接返回
> eg：http://localhost:8080/index.html?token=70fe12228b39432eb92ecddfc64006de

### 3.2	商品分类

#### **3.2.1 查询所有商品分类列表接口**

调用接口：/api/pms/product/category/list

请求方式：get

接口说明：首页和商品列表页返回所有的商品分类信息。

INPUT

> 无

OUTPUT

> data属性的数据格式为

| 字段                     | 字段类型 | 字段说明              |
|------------------------|------|-------------------|
| id                     | 整型   | 一级分类ID            |
| name                   | 字符串  | 分类名称              |
| level                  | 整型   | 分类级别：0->1级；1->2级  |
| showStatus             | 整型   | 显示状态：0->不显示；1->显示 |
| icon                   | 字符串  | 图标                |
| secProductCategoryList | 数组   | 商品二级分类列表          |

> secProductCategoryList属性的数据格式为

| 字段            | 字段类型 | 字段说明              |
|---------------|------|-------------------|
| secId         | 整型   | 二级分类ID            |
| secName       | 字符串  | 分类名称              |
| secLevel      | 整型   | 分类级别：0->1级；1->2级  |
| secShowStatus | 整型   | 显示状态：0->不显示；1->显示 |
| secIcon       | 字符串  | 图标                |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "id": 1,
      "name": "宠物主粮",
      "level": 0,
      "showStatus": 1,
      "icon": null,
      "secProductCategoryList": [
        {
          "secId": 13,
          "secName": "进口主粮",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 14,
          "secName": "国产主粮",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 15,
          "secName": "冻干主粮",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        }
      ]
    },
    {
      "id": 2,
      "name": "宠物零食",
      "level": 0,
      "showStatus": 1,
      "icon": null,
      "secProductCategoryList": [
        {
          "secId": 16,
          "secName": "磨牙洁齿",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 17,
          "secName": "肉制零食",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 18,
          "secName": "点心饮料",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 19,
          "secName": "罐头湿粮",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        },
        {
          "secId": 20,
          "secName": "冻干零食",
          "secLevel": 1,
          "secShowStatus": 1,
          "secIcon": null
        }
      ]
    }
  ]
}
```

### 3.3	商品属性

#### 3.31 根据商品二级分类ID查询商品属性列表接口

调用接口：/api/pms/product/attribute/byCategoryIds

请求方式：get

**Content-Type：application/json**

接口说明：商品列表页-根据商品二级分类ID查询该分类下的商品属性列表。

**注意：**根据商品一级分类查询该分类下的商品属性列表也调用该接口，入参传入该商品一级分类对应的二级分类ID列表即可。

INPUT

**示例：**

> 1 根据商品二级分类ID查询该分类下的商品属性列表(传入一个商品二级分类ID)
[13]
>
>2 根据商品一级分类查询该分类下的商品属性列表(传入该商品一级分类下的商品二级分类ID列表)
[13,14,15]

OUTPUT

| 字段                           | 字段类型 | 字段说明         |
|------------------------------|------|--------------|
| keyId                        | 整型   | 商品属性key值ID   |
| keyName                      | 字符串  | 商品属性key值名称   |
| productAttributeValueDtoList | 数组   | 商品属性value值列表 |

> productAttributeValueDtoList属性的数据格式为

| 字段        | 字段类型 | 字段说明         |
|-----------|------|--------------|
| valueId   | 整型   | 商品属性value值ID |
| valueName | 字符串  | 商品属性value值名称 |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "keyId": 1,
      "keyName": "主要配方",
      "productAttributeValueDtoList": [
        {
          "valueId": 6,
          "valueName": "鸡肉"
        },
        {
          "valueId": 7,
          "valueName": "鱼肉"
        },
        {
          "valueId": 8,
          "valueName": "羊肉"
        },
        {
          "valueId": 9,
          "valueName": "火鸡肉"
        },
        {
          "valueId": 10,
          "valueName": "鸭肉"
        },
        {
          "valueId": 11,
          "valueName": "牛肉"
        },
        {
          "valueId": 12,
          "valueName": "鹿肉"
        },
        {
          "valueId": 13,
          "valueName": "其他"
        }
      ]
    },
    {
      "keyId": 4,
      "keyName": "适合年龄",
      "productAttributeValueDtoList": [
        {
          "valueId": 21,
          "valueName": "全年龄犬"
        },
        {
          "valueId": 22,
          "valueName": "成犬"
        },
        {
          "valueId": 23,
          "valueName": "幼犬"
        },
        {
          "valueId": 24,
          "valueName": "老犬"
        },
        {
          "valueId": 25,
          "valueName": "怀孕哺乳期犬"
        },
        {
          "valueId": 26,
          "valueName": "中老年犬"
        }
      ]
    }
  ]
}
```

#### 3.32 **查询所有商品属性列表接口**

调用接口：/api/pms/product/attribute/list

请求方式：get

接口说明：用户在首页点击搜索按钮后，跳转到商品列表页，此时用户未选择任何商品分类，显示所有商品属性列表。

INPUT

> 无

OUTPUT

| 字段                           | 字段类型 | 字段说明         |
|------------------------------|------|--------------|
| keyId                        | 整型   | 商品属性key值ID   |
| keyName                      | 字符串  | 商品属性key值名称   |
| productAttributeValueDtoList | 数组   | 商品属性value值列表 |

> productAttributeValueDtoList属性的数据格式为

| 字段        | 字段类型 | 字段说明         |
|-----------|------|--------------|
| valueId   | 整型   | 商品属性value值ID |
| valueName | 字符串  | 商品属性value值名称 |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "keyId": 1,
      "keyName": "主要配方",
      "productAttributeValueDtoList": [
        {
          "valueId": 6,
          "valueName": "鸡肉"
        },
        {
          "valueId": 7,
          "valueName": "鱼肉"
        },
        {
          "valueId": 8,
          "valueName": "羊肉"
        },
        {
          "valueId": 9,
          "valueName": "火鸡肉"
        },
        {
          "valueId": 10,
          "valueName": "鸭肉"
        },
        {
          "valueId": 11,
          "valueName": "牛肉"
        },
        {
          "valueId": 12,
          "valueName": "鹿肉"
        },
        {
          "valueId": 13,
          "valueName": "其他"
        }
      ]
    },
    {
      "keyId": 2,
      "keyName": "适合体型",
      "productAttributeValueDtoList": [
        {
          "valueId": 14,
          "valueName": "全体型犬"
        },
        {
          "valueId": 15,
          "valueName": "小型犬"
        },
        {
          "valueId": 16,
          "valueName": "中型犬"
        },
        {
          "valueId": 17,
          "valueName": "大型犬"
        }
      ]
    },
    {
      "keyId": 3,
      "keyName": "颗粒大小",
      "productAttributeValueDtoList": [
        {
          "valueId": 18,
          "valueName": "标准粒"
        },
        {
          "valueId": 19,
          "valueName": "小颗粒"
        },
        {
          "valueId": 20,
          "valueName": "大颗粒"
        }
      ]
    },
    {
      "keyId": 4,
      "keyName": "适合年龄",
      "productAttributeValueDtoList": [
        {
          "valueId": 21,
          "valueName": "全年龄犬"
        },
        {
          "valueId": 22,
          "valueName": "成犬"
        },
        {
          "valueId": 23,
          "valueName": "幼犬"
        },
        {
          "valueId": 24,
          "valueName": "老犬"
        },
        {
          "valueId": 25,
          "valueName": "怀孕哺乳期犬"
        },
        {
          "valueId": 26,
          "valueName": "中老年犬"
        }
      ]
    },
    {
      "keyId": 5,
      "keyName": "重量区间",
      "productAttributeValueDtoList": [
        {
          "valueId": 27,
          "valueName": "小包"
        },
        {
          "valueId": 28,
          "valueName": "中包"
        },
        {
          "valueId": 29,
          "valueName": "大包"
        },
        {
          "valueId": 30,
          "valueName": "超小包"
        },
        {
          "valueId": 31,
          "valueName": "超大包"
        }
      ]
    }
  ]
}
```

#### 3.33 **查询所有商品品牌列表接口**

调用接口：/api/pms/product/brand/list

请求方式：get

接口说明：商品列表页-查询所有商品品牌列表(按照品牌名称首字母排序)。

INPUT

> 无

OUTPUT

| 字段   | 字段类型 | 字段说明   |
|------|------|--------|
| id   | 整型   | 商品品牌ID |
| name | 字符串  | 商品品牌名称 |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "id": 16,
      "name": "毛球殿下downyball"
    },
    {
      "id": 15,
      "name": "美士Nutro"
    },
    {
      "id": 14,
      "name": "耐吉斯SOLUTION"
    },
    {
      "id": 13,
      "name": "纽顿nutram number"
    },
    {
      "id": 12,
      "name": "牛油果AVODerm"
    },
    {
      "id": 11,
      "name": "now FRESH"
    },
    {
      "id": 9,
      "name": "N3"
    },
    {
      "id": 8,
      "name": "诺瑞Nory"
    },
    {
      "id": 1,
      "name": "纽牌Health-Nu"
    },
    {
      "id": 7,
      "name": "欧恩焙Oven-Baked"
    },
    {
      "id": 6,
      "name": "欧帝亿IMPERIAL PAW"
    },
    {
      "id": 5,
      "name": "欧冠EURO PREMIUM"
    },
    {
      "id": 4,
      "name": "佩玛思特PetMaster"
    },
    {
      "id": 3,
      "name": "普瑞纳HIPRO"
    },
    {
      "id": 10,
      "name": "Sugarfox"
    },
    {
      "id": 2,
      "name": "丝倍亮SUPERCOAT"
    }
  ]
}
```

### 3.4	商品评价

#### 3.41  发表评价接口

调用接口：api/pms/comment/postComment

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：用户购买商品成功后，发表评价。

INPUT

| **参数名称** | **参数类型** | **说明**               | 是否必传 |
|----------|----------|----------------------|------|
| spuId    | 整型       | 商品ID                 | 是    |
| content  | 字符串      | 评论内容                 | 是    |
| star     | 整型       | 评价星数：0->5            | 是    |
| imgIds   | 字符串      | 评论图片的多个id字符串，如：1,2,3 | 否    |
| token    | 字符串      | 用户登录后获取，header中传递    | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.42 **查询评价列表接口**

调用接口：api/pms/comment/commentList

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：分页查询用户评价列表信息，查询评价列表信息的方式有三种：1 全部评价；2 有图评价；3 无图评价。

INPUT

| **参数名称** | **参数类型** | **说明*                        | 是否必传       |
|----------|----------|------------------------------|------------|
| spuId    | 整型       | 商品ID                         | 是          |
| isPic    | 整型       | 方式：0:无图评价；1: 有图评价；null: 全部评价 | 否，不传时，查询全部 |
| pageNo   | 整型       | 页码（从1开始），默认1                 | 否          |
| pageSize | 整型       | 页长，默认20                      | 否          |

OUTPUT

| 字段       | 字段类型 | 字段说明 |
|----------|------|------|
| pageNo   | 整型   | 当前页  |
| pageSize | 整型   | 页长   |
| total    | 整型   | 总数   |
| pages    | 整型   | 总页数  |
| list     | 数组   | 评价列表 |

> list属性的数据格式为

| **字段**    | **字段类型** | **字段说明**                                                                                              |
|-----------|----------|-------------------------------------------------------------------------------------------------------|
| commentId | 整型       | 评价ID                                                                                                  |
| content   | 字符串      | 评论内容                                                                                                  |
| star      | 整型       | 评价星数：0->5                                                                                             |
| userName  | 字符串      | 用户名                                                                                                   |
| addTime   | 字符串      | 发表评价时间                                                                                                |
| imgList   | 数组       | 评价图片列表<br />["http://comment-001.jpg",<br />"http://comment-001.jpg",<br />"http://comment-001.jpg",] |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "pageNo": 1,
    "pageSize": 20,
    "total": 5,
    "pages": null,
    "list": [
      {
        "commentId": 27,
        "spuId": 1,
        "userId": 93,
        "star": 1,
        "content": "板凳！！！",
        "addTime": "2020-09-04 16:00:19",
        "imgList": [
          "pms/product/category/comment-001.jpg"
        ],
        "userName": "13521214507",
        "headUrl": "http://xxx.png"
      },
      {
        "commentId": 26,
        "spuId": 1,
        "userId": 93,
        "star": 1,
        "content": "沙发！！！",
        "addTime": "2020-09-04 16:00:08",
        "imgList": [
          "pms/product/category/comment-001.jpg",
          "pms/product/category/comment-001.jpg"
        ],
        "userName": "13521214507",
        "headUrl": "http://xxx.png"
      }
    ],
    "beginPos": null
  }
}
```

### 3.5	商品

#### 3.51 **商品搜索接口** && 首页商品列表接口 && 商品详情页热门商品排行接口

调用接口：/api/pms/product/search

请求方式：get

**Content-Type：application/json**

接口说明：

​ 1 商品搜索

​ 2 首页商品列表接口

​ 热门Tab：按照销量倒序排列取前八个商品进行展示(sort=2)

​ 进口主粮Tab：按照二级分类ID查询八个商品进行展示(productCategoryId=13)

​ 国产主粮Tab：按照二级分类ID查询八个商品进行展示(productCategoryId=14)

​ 3 商品详情页热门商品排行接口

​ 热门排行：按商品销量倒序排雷(sort=2)

INPUT

| **参数名称**                | **参数类型** | **说明*                | 是否必传 |
|-------------------------|----------|----------------------|------|
| brandId                 | 整型       | 品牌ID                 | 否    |
| productLevel1CategoryId | 整型       | 一级分类ID               | 否    |
| productLevel2CategoryId | 整型       | 二级分类ID               | 否    |
| keyword                 | 字符串      | 搜索条件                 | 否    |
| productAttributeIds     | 数组       | 商品属性ID数组             | 否    |
| sort                    | 整型       | 排序：1->默认；2->销量；3->评论 | 否    |
| pageNo                  | 整型       | 页码（从1开始），默认1         | 否    |
| pageSize                | 整型       | 页长，默认20              | 否    |

**示例**

```json
{
  "brandId": "",
  "productLevel1CategoryId": "",
  "productLevel2CategoryId": "",
  "keyword": "加",
  "productAttributeIds": [
    2,
    3,
    7
  ],
  "sort": 1,
  "pageNo": 1,
  "pages": 1,
  "total": 1,
  "pageSize": 10
}
```

OUTPUT

| 字段            | 字段类型 | 字段说明      |
|---------------|------|-----------|
| id            | 整型   | 主键ID      |
| name          | 字符串  | 商品名称      |
| defaultPrice  | 整型   | 商品默认价格    |
| sale          | 整型   | 商品销量      |
| defaultPicUrl | 字符串  | 商品默认图片URL |

**示例**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "pageNo": 1,
    "pageSize": 2,
    "total": 2,
    "pages": 1,
    "list": [
      {
        "id": 1,
        "name": "加拿大原装进口百加世NOW FRESH 无谷小型犬全龄配方粮 6磅",
        "sale": 2,
        "defaultPicUrl": null,
        "defaultPrice": 100.00
      },
      {
        "id": 2,
        "name": "商品2",
        "sale": 3,
        "defaultPicUrl": null,
        "defaultPrice": 200.00
      }
    ],
    "beginPos": 0
  }
}
```

#### 3.52  查看商品详情接口

调用接口：/api/pms/product/detail

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：商品详情页-根据spuID查询商品详细信息。

INPUT

| **参数名称** | **参数类型** | **说明** | **是否必传** |
|----------|----------|--------|----------|
| spuId    | 整型       | spuID  | 是        |

OUTPUT

| 字段         | 字段类型 | 字段说明    |
|------------|------|---------|
| spu        | 对象   | 商品spu信息 |
| categories | 数组   | 商品分类数组  |
| skuList    | 数组   | 商品sku列表 |

> spu对象的数据格式为

| 字段                   | 字段类型 | 字段说明                        |
|----------------------|------|-----------------------------|
| id                   | 整型   | 商品spuID                     |
| subTitle             | 字符串  | 商品副标题                       |
| sale                 | 整型   | 商品总销量                       |
| commentTotalScore    | 整型   | 评价总评分                       |
| commentAmount        | 整型   | 商品评价数量                      |
| productSpecification | 字符串  | 商品规格(json格式，用于商品详情页展示商品所有规格 |
| productDetailPicList | 数组   | 商品详情图片列表                    |

> productDetailPicList 集合的数据格式为

| 字段     | 字段类型 | 字段说明 |
|--------|------|------|
| picId  | 整型   | 图片ID |
| picUrl | 字符串  | 图片路径 |

> categories数组的数据格式为

| 字段   | 字段类型 | 字段说明   |
|------|------|--------|
| id   | 整型   | 商品分类ID |
| name | 字符串  | 商品分类名称 |

> skuList数组的数据格式为

| 字段                      | 字段类型 | 字段说明            |
|-------------------------|------|-----------------|
| id                      | 整型   | 商品skuID         |
| spuId                   | 整型   | 商品spuID         |
| title                   | 字符串  | 商品名称            |
| price                   | 整型   | 商品价格            |
| unit                    | 字符串  | 商品单位            |
| stock                   | 整型   | 商品库存            |
| productSkuSpecification | 字符串  | 商品sku规格(json格式) |
| skuPicList              | 数组   | 商品sku图片列表       |

> skuPicList数组的数据格式为

| 字段        | 字段类型 | 字段说明           |
|-----------|------|----------------|
| id        | 整型   | 主键ID           |
| skuId     | 整型   | 商品skuID        |
| picUrl    | 字符串  | 商品sku图片URL     |
| isDefault | 整型   | 默认展示：0->否；1->是 |

示例：

```json
{
  "code": "200",
  "msg": "操作成功",
  "data": {
    "spu": {
      "id": 1,
      "subTitle": "加拿大原装进口 无谷粮 四叶形颗粒",
      "sale": 35000,
      "commentTotalScore": 4,
      "commentAmount": 541,
      "productSpecification": "{\"规格\":[\"6磅\",\"12磅\",\"25磅\"]}",
      "productDetailPicList": [
        {
          "picId": 1,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.1.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=pVY9vHRhd%2BDWT%2BXpB9RKP2alg6o%3D"
        },
        {
          "picId": 2,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.2.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=vZ1R601WXJl5nrFTnX5ZV9TbEGA%3D"
        },
        {
          "picId": 3,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.3.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=ApVEPmQW2VzdGqnjjWpvEzoqwwI%3D"
        },
        {
          "picId": 4,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.4.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=Z4kTl%2BUmh1YId3Hs6xkNP63oq2g%3D"
        },
        {
          "picId": 5,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.5.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=r8VJ%2B%2F%2F1316u8jAh%2BYNzHULwGG4%3D"
        },
        {
          "picId": 6,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.6.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=Kd7WLw2%2ButNtv5obzU0Lq%2B%2FJKt4%3D"
        },
        {
          "picId": 7,
          "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/detail/1.7.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=PSaJAnqssqeD1fc7PqZ3s7fARmQ%3D"
        }
      ]
    },
    "categories": [
      {
        "id": 1,
        "name": "宠物主粮"
      },
      {
        "id": 2,
        "name": "宠物零食"
      },
      {
        "id": 3,
        "name": "宠物窝垫"
      },
      {
        "id": 4,
        "name": "宠物玩具"
      },
      {
        "id": 5,
        "name": "宠物清洁"
      },
      {
        "id": 6,
        "name": "宠物保健"
      },
      {
        "id": 7,
        "name": "宠物护理"
      },
      {
        "id": 8,
        "name": "宠物生活"
      },
      {
        "id": 9,
        "name": "宠物牵引"
      },
      {
        "id": 10,
        "name": "宠物洗澡"
      },
      {
        "id": 11,
        "name": "宠物服务"
      },
      {
        "id": 12,
        "name": "宠物美容"
      }
    ],
    "skuList": [
      {
        "id": 1000001,
        "spuId": 1,
        "title": "加拿大原装进口百加世NOW FRESH 无谷小型犬全龄配方粮 6磅",
        "price": 0.01,
        "unit": "袋",
        "stock": 1000,
        "productSkuSpecification": "{\"规格\":\"6磅\"}",
        "skuPicList": [
          {
            "id": 78,
            "skuId": 1000001,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-1-4.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=RjWJMEKzuj8j7YkPOeeznbS0%2FzQ%3D",
            "isDefault": 0
          },
          {
            "id": 11,
            "skuId": 1000001,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-1-4.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=RjWJMEKzuj8j7YkPOeeznbS0%2FzQ%3D",
            "isDefault": 0
          },
          {
            "id": 10,
            "skuId": 1000001,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-1-3.jpg?Expires=1681785415&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=SmGoEc%2BuvT9apjzgjAxd8KXzsN0%3D",
            "isDefault": 0
          },
          {
            "id": 9,
            "skuId": 1000001,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-1-2.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=hhg6zCaXP6iEBkrbnYH2E0Z8Pos%3D",
            "isDefault": 0
          },
          {
            "id": 1,
            "skuId": 1000001,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-1-1.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=XaLPs7TxxakVQa%2FdZsORsxRnHLY%3D",
            "isDefault": 1
          }
        ]
      },
      {
        "id": 1000002,
        "spuId": 1,
        "title": "加拿大原装进口 百加世NOW FRESH 无谷小型犬全龄配方粮 12磅",
        "price": 479,
        "unit": "袋",
        "stock": 1000,
        "productSkuSpecification": "{\"规格\":\"12磅\"}",
        "skuPicList": [
          {
            "id": 13,
            "skuId": 1000002,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-2-4.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=7l8vDwSIP40lyb670RNxCsvo9Mk%3D",
            "isDefault": 0
          },
          {
            "id": 12,
            "skuId": 1000002,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-2-3.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=9%2BaehHMBGnGiYPGrJ8Ude5ww03U%3D",
            "isDefault": 0
          },
          {
            "id": 3,
            "skuId": 1000002,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-2-2.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=BHaqedhZxaeN%2B8Mr9VcS7358TXU%3D",
            "isDefault": 0
          },
          {
            "id": 2,
            "skuId": 1000002,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-2-1.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=7l%2FlqVYl82Jap3Wvuwgfze9py3c%3D",
            "isDefault": 1
          }
        ]
      },
      {
        "id": 1000003,
        "spuId": 1,
        "title": "加拿大原装进口 百加世NOW FRESH 无谷小型犬全龄配方粮 25磅",
        "price": 859,
        "unit": "袋",
        "stock": 500,
        "productSkuSpecification": "{\"规格\":\"25磅\"}",
        "skuPicList": [
          {
            "id": 16,
            "skuId": 1000003,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-3-4.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=1M7kicY6v7GKdGPIzWc9MArRPZ4%3D",
            "isDefault": 0
          },
          {
            "id": 15,
            "skuId": 1000003,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-3-3.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=gtJExzothHlvu99az9jxBJ39xy4%3D",
            "isDefault": 0
          },
          {
            "id": 14,
            "skuId": 1000003,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-3-2.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=cWuiLeIak2W8FxpIiAJwTI9VXBw%3D",
            "isDefault": 0
          },
          {
            "id": 4,
            "skuId": 1000003,
            "picUrl": "https://pet-obj.oss-cn-hangzhou.aliyuncs.com/pms/product/sku/1-3-1.jpg?Expires=1681785416&OSSAccessKeyId=LTAI5tHZyQEu3hmkrzGKy1do&Signature=zkKFqYOVr6FoAUUt0a1oMqpZ9ZQ%3D",
            "isDefault": 1
          }
        ]
      }
    ]
  }
}
```

### 3.6	购物车

#### 3.61 **添加购物车接口**

调用接口：/api/oms/cart/add

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：将商品添加到购物车。

INPUT

| **参数名称** | **参数类型** | **说明**                                      | 是否必传 |
|----------|----------|---------------------------------------------|------|
| skuId    | 整型       | 商品sku ID                                    | 是    |
| num      | 整型       | 增加的商品数量<br />当num>0时，增加数据<br />当num<0时，减少数量 | 是    |
| token    | 字符串      | 登陆后获取（header中传递）                            | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.62  移除购物车商品接口

调用接口：/api/oms/cart/remove

请求方式：delete

**Content-Type：application/x-www-form-urlencoded**

接口说明：从购物车中移除商品

INPUT

| **参数名称** | **参数类型** | **说明**                                   | 是否必传 |
|----------|----------|------------------------------------------|------|
| skuIds   | 字符串      | 以英文**逗号**连接的多个商品skuId，<br />例如：**1,2,3** | 是    |
| token    | 字符串      | 登陆后获取（header中传递）                         | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.63 **查询用户的购物车信息接口**

调用接口：/api/oms/cart/cartList

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：查询用户的购物车信息。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| token    | 字符串      | 登陆后获取（header中传递） | 是    |

OUTPUT

| 字段        | 字段类型 | 字段说明        |
|-----------|------|-------------|
| spuId     | 整型   | 商品ID        |
| skuId     | 整型   | 商品sku ID    |
| title     | 字符串  | 商品标题        |
| picUrl    | 字符串  | 商品默认规格图片URL |
| unitPrice | 浮点型  | 单价          |
| num       | 整型   | 数量          |
| price     | 浮点型  | 每类型商品的总价    |
| unit      | 字符串  | 数量单位（袋）     |
| addTime   | 字符串  | 添加时间        |

**示例**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "userId": 93,
      "spuId": 1,
      "skuId": 1000002,
      "title": "加拿大原装进口 百加世NOW FRESH 无谷小型犬全龄配方粮 12磅",
      "picUrl": "http://xxx.png",
      "stockMsg": null,
      "unitPrice": 479.00,
      "unit": "袋",
      "num": 2,
      "addTime": "2020-09-04 15:09:41"
    },
    {
      "userId": 93,
      "spuId": 2,
      "skuId": 1000004,
      "title": "伊丽Elite S号哈皮骨头造型清爽冰垫 适合6-10斤体重",
      "picUrl": "http://xxx.png",
      "stockMsg": null,
      "unitPrice": 17.50,
      "unit": "个",
      "num": 4,
      "addTime": "2020-09-04 15:05:04"
    }
  ]
}
```

#### 3.64 **查询购物车中商品种类数量**

调用接口：api/oms/cart/cartCount

请求方式：get

INPUT

| **参数名称** | **参数类型** | **说明** | **是否必传** |
|----------|----------|--------|----------|
| token    | 字符串      | 登陆后获取  | 是        |

> data属性的数据格式为

OUTPUT

| 字段        | 字段类型 | 字段说明    |
|-----------|------|---------|
| cartCount | 整形   | 购物车中的数量 |

**示例**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "cartCount": 93
  }
}
```

### 3.7	收货地址

#### 3.71  添加、修改收货地址接口

调用接口：api/ums/receiverAddress/add

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：新增收货地址。

INPUT

| **参数名称**      | **参数类型** | **说明**               | 是否必传 |
|---------------|----------|----------------------|------|
| token         | 字符串      | 登陆后获取（header中传递）     | 是    |
| userName      | 字符串      | 收货人姓名                | 是    |
| phoneNumber   | 字符串      | 收货电话                 | 是    |
| defaultStatus | 整型       | 是否为默认收货地址：0->不是；1->是 | 是    |
| province      | 字符串      | 省份/直辖市               | 是    |
| city          | 字符串      | 城市                   | 是    |
| region        | 字符串      | 区                    | 是    |
| countyId      | 整型       | 县级行政区Id              | 是    |
| detailAddress | 字符串      | 详细地址(街道)             | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.72 **编辑收货地址接口**

调用接口：api/ums/receiverAddress/update

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：编辑收货地址。

INPUT

| **参数名称**      | **参数类型** | **说明**               | 是否必传 |
|---------------|----------|----------------------|------|
| userId        | 整型       | 用户ID                 | 是    |
| token         | 字符串      | 登陆后获取（header中传递）     | 是    |
| name          | 字符串      | 收货人姓名                | 是    |
| phoneNumber   | 字符串      | 收货电话                 | 是    |
| defaultStatus | 整型       | 是否为默认收货地址：0->不是；1->是 | 是    |
| province      | 字符串      | 省份/直辖市               | 是    |
| city          | 字符串      | 城市                   | 是    |
| region        | 字符串      | 区                    | 是    |
| detailAddress | 字符串      | 详细地址(街道)             | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.73 **删除收货地址接口**

调用接口：api/ums/receiverAddress/remove

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：删除收货地址。

INPUT

| **参数名称**  | **参数类型** | **说明**           | 是否必传 |
|-----------|----------|------------------|------|
| userId    | 整型       | 用户ID             | 是    |
| token     | 字符串      | 登陆后获取（header中传递） | 是    |
| addressId | 整型       | 收货地址ID           | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.74 **查看收货地址接口**

调用接口：api/ums/receiverAddress/list

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：查看收货地址。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| userId   | 整型       | 用户ID             | 是    |
| token    | 字符串      | 登陆后获取（header中传递） | 是    |

OUTPUT

> data属性的数据格式为

| **参数名称**      | **参数类型** | **说明**               |
|---------------|----------|----------------------|
| id            | 整型       | 主键id                 |
| userId        | 整型       | 用户ID                 |
| name          | 字符串      | 收货人姓名                |
| phoneNumber   | 字符串      | 收货电话                 |
| defaultStatus | 整型       | 是否为默认收货地址：0->不是；1->是 |
| province      | 字符串      | 省份/直辖市               |
| city          | 字符串      | 城市                   |
| region        | 字符串      | 区                    |
| detailAddress | 字符串      | 详细地址(街道)             |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "id": 1,
      "userId": 93,
      "name": "张三",
      "phoneNumber": "13521212121",
      "defaultStatus": 1,
      "province": "北京",
      "city": "北京",
      "region": "海淀",
      "detailAddress": "燕北园街道"
    }
  ]
}
```

#### 3.75 **设置默认收货地址接口**

调用接口：api/ums/receiverAddress/default

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：设置默认收货地址。

INPUT

| **参数名称**  | **参数类型** | **说明**           | 是否必传 |
|-----------|----------|------------------|------|
| userId    | 整型       | 用户ID             | 是    |
| token     | 字符串      | 登陆后获取（header中传递） | 是    |
| addressId | 整型       | 收货地址ID           | 是    |

OUTPUT

> 无data属性

**示例：**

```json
{
  "code": "200",
  "msg": "成功"
}
```

#### 3.76 **省市区列表接口**

调用接口：api/ums/receiverAddress/pcdList

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：查询省市区列表。

INPUT

> 无

OUTPUT

> data属性的数据格式为

| **参数名称** | **参数类型** | **说明**   |
|----------|----------|----------|
| id       | 整型       | 省/直辖市ID  |
| name     | 字符串      | 名称       |
| pcdList  | 数组       | 市级地区信息列表 |

> list1属性的数据格式为

| **参数名称** | **参数类型** | **说明**   |
|----------|----------|----------|
| id       | 整型       | 城市ID     |
| name     | 字符串      | 名称       |
| pcdList  | 数组       | 县级地区信息列表 |

> list1属性的数据格式为

| **参数名称** | **参数类型** | **说明**  |
|----------|----------|---------|
| id       | 整型       | 省/直辖市ID |
| name     | 字符串      | 名称      |

**示例：**

```json

```

### 3.8	订单

#### 3.81  创建订单

调用接口：

请求方式：post

接口说明：下单。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| userId   | 整型       | 用户ID             | 是    |
| token    | 字符串      | 登陆后获取（header中传递） | 是    |
| cartId   | 整型       | 购物车ID            | 是    |

OUTPUT

| 字段      | 字段类型 | 字段说明 |
|---------|------|------|
| orderId | 字符串  | 订单id |
| orderNo | 字符串  | 订单编号 |

**示例：**

```json
{
  "code": "0",
  "msg": "成功"
}
```

#### 3.82 **订单预支付信息接口**

调用接口：api/oms/order/prepayment

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：进入订单提交页面，查询订单预支付信息，包括订单中的商品列表、总价、运费等信息。

INPUT

| **参数名称** | **参数类型** | **说明**                                   | 是否必传 |
|----------|----------|------------------------------------------|------|
| skuIds   | 字符串      | 以英文**逗号**拼接的多个商品skuId，<br />例如：**1,2,3** | 是    |
| token    | 字符串      | 登陆后获取（header中传递）                         | 是    |

OUTPUT

> data属性的数据格式为

| 字段          | 字段类型 | 字段说明 |
|-------------|------|------|
| totalMoney  | 浮点型  | 商品总额 |
| payMoney    | 浮点型  | 应付总额 |
| freight     | 浮点型  | 运费   |
| productList | 竖中指  | 商品信息 |

productList中的数据

| 字段        | 字段类型 | 字段说明        |
|-----------|------|-------------|
| spuId     | 整型   | 商品spu ID    |
| skuId     | 整型   | 商品sku ID    |
| title     | 字符串  | 商品标题        |
| picUrl    | 字符串  | 商品默认规格图片URL |
| unitPrice | 浮点型  | 单价          |
| num       | 整型   | 数量          |
| price     | 浮点型  | 每类型商品的总价    |
| unit      | 字符串  | 数量单位（袋）     |
| addTime   | 字符串  | 添加时间        |

示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "totalMoney": 500.00,
      "payMoney": 500.00,
      "freight": 10.00,
      "productList": {
        "spuId": 1,
        "skuId": 1000002,
        "title": "加拿大原装进口 百加世NOW FRESH 无谷小型犬全龄配方粮 12磅",
        "picUrl": "http://xxx.png",
        "unitPrice": 479.00,
        "unit": "袋",
        "num": 2
      }
    }
  ]
}
```

#### 3.83 **查询订单详情接口**

调用接口：api/oms/order/detail/{orderNo}

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：根据订单编号查询订单详情。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| orderNo  | 整型       | 订单编号(请求地址中传递)    | 是    |
| token    | 字符串      | 登陆后获取（header中传递） | 是    |

OUTPUT

> data属性的数据格式为

| **参数名称**        | **参数类型** | **说明**  |
|-----------------|----------|---------|
| id              | 整型       | 订单id    |
| orderNo         | 浮点型      | 订单编号    |
| payMoney        | 浮点型      | 应付总额    |
| expirationTime  | 字符串      | 订单过期时间  |
| orderStatus     | 整型       | 订单状态    |
| payStatus       | 整型       | 支付状态    |
| receiverName    | 字符串      | 收货人姓名   |
| receiverPhone   | 字符串      | 收货人电话号码 |
| receiverAddress | 字符串      | 收货人地址   |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "id": 1,
      "orderNo": "2019122517372297170000000005",
      "payMoney": 500.00,
      "expirationTime": "2020-09-17 10:32:07",
      "orderStatus": 1,
      "payStatus": 1,
      "receiverName": "张三",
      "receiverPhone": "13521212121",
      "receiverAddress": "北京市海淀区燕北园街道"
    }
  ]
}
```

####  

### 3.9	支付

#### 3.91 **生成微信支付二维码**

调用接口：api/oms/pay/wechat/codeUrl/{orderNo}

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：生成微信支付使用的二维码。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| orderNo  | 字符串      | 订单编号(请求地址中传递)    | 是    |
| token    | 字符串      | 登陆后获取（header中传递） | 是    |

OUTPUT

| 字段      | 字段类型 | 字段说明        |
|---------|------|-------------|
| orderNo | 字符串  | 订单号         |
| money   | 浮点型  | 支付人民币金额     |
| codeUrl | 字符串  | 生成支付二维码的字符串 |

**示例：**

```json

```

#### 3.92 微信支付回调（非前端调用接口）

调用接口：api/oms/pay/wechat/codeUrl/wxPay/notify

请求方式：post

接口说明：微信支付订单下单成功后的回调接口，通知支付结果。

INPUT

| **参数名称** | **参数类型** | **说明** | **举例** |
|----------|----------|--------|--------|
|          |          |        |        |

OUTPUT

| 字段 | 字段类型 | 字段说明 |
|----|------|------|
|    |      |      |

#### 3.93  微信支付状态轮询接口

调用接口：api/oms/pay/queryOrderStatus/{orderNo}

请求方式：get

**Content-Type：application/x-www-form-urlencoded**

接口说明：查询微信支付的状态。

INPUT：

| **参数名称** | **参数类型** | **说明**        | **举例** |
|----------|----------|---------------|--------|
| orderNo  | 字符串      | 订单编号(请求地址中传递) |        |

OUTPUT

| 字段        | 字段类型 | 字段说明                                |
|-----------|------|-------------------------------------|
| payStatus | 整型   | 支付状态 (1:待支付；2:支付中再给你；3:支付成功；4:支付失败) |

**示例：**

```
跳转到支付成功或失败页面
```

#### 3.94 支付宝支付（同步请求）

调用接口：api/oms/pay/aliPay/{orderNo}

请求方式：post

**Content-Type：application/x-www-form-urlencoded**

接口说明：支付宝支付订单下单成功会唤起支付宝支付页面。

INPUT

| **参数名称** | **参数类型** | **说明**           | 是否必传 |
|----------|----------|------------------|------|
| orderNo  | 字符串      | 订单编号             | 是    |
| token    | token    | 登陆后获取（header中传递） | 是    |

OUTPUT

| 字段 | 字段类型 | 字段说明 |
|----|------|------|
|    |      |      |

**示例：**

```
阿里支付会唤起阿里支付页面。
```

#### 3.95 支付宝异步回调（非前端调用接口）

接口地址：api/oms/pay/aliPay/notify

请求方式：post

接口说明：支付宝支付订单下单成功后的回调接口，通知支付结果

INPUT

| **参数名称** | **参数类型** | **说明** | **举例** |
|----------|----------|--------|--------|
|          |          |        |        |

OUTPUT

| 字段 | 字段类型 | 字段说明 |
|----|------|------|
|    |      |      |

**示例：**

```
跳转到支付成功或失败页面
```

#### 3.96 支付宝同步回调（非前端调用接口）

接口地址：api/oms/pay/aliPay/return

请求方式：GET

接口说明：支付宝支付订单下单成功后的回调接口，通知支付结果。

INPUT

| **参数名称** | **参数类型** | **说明** | **举例** |
|----------|----------|--------|--------|
|          |          |        |        |

OUTPUT

| 字段 | 字段类型 | 字段说明 |
|----|------|------|
|    |      |      |

**示例：**

```   
跳转到支付成功或失败页面
```

### 4.0	文件处理

#### 4.01  文件上传

调用接口：/api/files/uploadFile

请求方式：post

接口说明：上传文件。

INPUT

| **参数名称** | **参数类型**      | **说明**              | 是否必传 |
|----------|---------------|---------------------|------|
| file     | MultipartFile | 文件                  | 是    |
| type     | 整型            | 文件类型（1:商品文件；2:评论图片） | 是    |
| token    | 字符串           | 登陆后获取（header中传递）    | 是    |

OUTPUT

| 字段       | 字段类型 | 字段说明   |
|----------|------|--------|
| id       | 字符串  | 文件id   |
| filePath | 字符串  | 文件访问路径 |

**示例：**

```json
{
  "code": "200",
  "msg": "成功",
  "data": {
    "id": 18,
    "filePath": "pms/product/comment/202009090849146831803.jpg"
  }
}
```

###  
